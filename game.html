<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Tebak Bom (Minesweeper)</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #f0f0f0;
      margin: 0;
    }

    .game-container {
      display: grid;
      grid-template-columns: repeat(5, 50px);
      grid-template-rows: repeat(5, 50px);
      gap: 5px;
    }

    .cell {
      width: 50px;
      height: 50px;
      background-color: #ddd;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 18px;
      cursor: pointer;
      border-radius: 5px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .cell.revealed {
      background-color: #f7f7f7;
    }

    .cell.bomb {
      background-color: red;
    }

    .score {
      font-size: 20px;
      margin-bottom: 20px;
    }

    .reset-button {
      padding: 10px 20px;
      font-size: 16px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .reset-button:hover {
      background-color: #45a049;
    }
  </style>
</head>
<body>

<div>
  <div class="score">Skor: <span id="score">0</span></div>
  <button class="reset-button" id="resetButton">Reset Game</button>
  <div class="game-container" id="gameContainer">
    <!-- Grid Cells will be generated by JavaScript -->
  </div>
</div>

<script>
  const gridSize = 5; // Ukuran grid 5x5
  const bombCount = 5; // Jumlah bom
  let score = 0;
  let gameActive = true;
  let grid = [];
  let revealedCells = 0;

  const scoreElement = document.getElementById('score');
  const gameContainer = document.getElementById('gameContainer');
  const resetButton = document.getElementById('resetButton');

  resetButton.addEventListener('click', () => {
    resetGame();
  });

  function createGrid() {
    gameContainer.innerHTML = '';
    grid = [];
    revealedCells = 0;
    for (let i = 0; i < gridSize; i++) {
      const row = [];
      for (let j = 0; j < gridSize; j++) {
        const cell = document.createElement('div');
        cell.classList.add('cell');
        cell.setAttribute('data-row', i);
        cell.setAttribute('data-col', j);
        cell.addEventListener('click', () => revealCell(i, j, cell));
        row.push(cell);
        gameContainer.appendChild(cell);
      }
      grid.push(row);
    }
  }

  function placeBombs() {
    let bombsPlaced = 0;
    while (bombsPlaced < bombCount) {
      const row = Math.floor(Math.random() * gridSize);
      const col = Math.floor(Math.random() * gridSize);

      if (grid[row][col].classList.contains('bomb')) {
        continue;
      }

      grid[row][col].classList.add('bomb');
      bombsPlaced++;
    }
  }

  function revealCell(row, col, cell) {
    if (!gameActive || cell.classList.contains('revealed')) {
      return;
    }

    cell.classList.add('revealed');
    revealedCells++;

    if (cell.classList.contains('bomb')) {
      cell.style.backgroundColor = 'red';
      endGame(false);
    } else {
      const nearbyBombs = countNearbyBombs(row, col);
      cell.textContent = nearbyBombs > 0 ? nearbyBombs : '';

      if (nearbyBombs === 0) {
        revealAdjacentCells(row, col);
      }
    }

    score++;
    scoreElement.textContent = score;

    if (revealedCells === (gridSize * gridSize - bombCount)) {
      endGame(true);
    }
  }

  function countNearbyBombs(row, col) {
    let bombCount = 0;

    for (let r = row - 1; r <= row + 1; r++) {
      for (let c = col - 1; c <= col + 1; c++) {
        if (r >= 0 && r < gridSize && c >= 0 && c < gridSize && grid[r][c].classList.contains('bomb')) {
          bombCount++;
        }
      }
    }

    return bombCount;
  }

  function revealAdjacentCells(row, col) {
    for (let r = row - 1; r <= row + 1; r++) {
      for (let c = col - 1; c <= col + 1; c++) {
        if (r >= 0 && r < gridSize && c >= 0 && c < gridSize) {
          const adjacentCell = grid[r][c];
          if (!adjacentCell.classList.contains('revealed')) {
            revealCell(r, c, adjacentCell);
          }
        }
      }
    }
  }

  function endGame(won) {
    gameActive = false;
    const cells = document.querySelectorAll('.cell');
    cells.forEach(cell => {
      cell.removeEventListener('click', revealCell);
      if (cell.classList.contains('bomb') && !cell.classList.contains('revealed')) {
        cell.style.backgroundColor = 'red';
      }
    });
    alert(won ? 'Selamat! Anda menang!' : 'Game Over! Anda terkena bom.');
  }

  function resetGame() {
    score = 0;
    scoreElement.textContent = score;
    gameActive = true;
    createGrid();
    placeBombs();
  }

  // Initialize the game
  resetGame();
</script>

</body>
</html>
